import{r as f,b as m,j as e,u as b,S as k,d as x,R as y,t as p}from"./index-90375d2a.js";function j(c){const[t,n]=f.useState(c);return f.useEffect(()=>n(c),[c]),t}function N(c,t,n){const g=f.useCallback(u=>{c.includes(u.key)&&t(u)},[t,...n||[]]);f.useEffect(()=>(document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}),[t,...n||[]])}function w(c,t){return N(["Escape"],c,t)}function C({isOpen:c,exit:t,children:n}){const g=j(c),u=f.useRef(null);f.useEffect(()=>{var l,d;c&&((l=u.current)==null||l.showModal()),c||((d=u.current)==null||d.close())},[c]),w(()=>t(),[t]);const a=m(()=>g&&t(),[g]);return e.jsx("dialog",{className:"shadow-2xl border-none bg-transparent",ref:u,children:e.jsx("div",{ref:a,className:"bg-white rounded p-6 border-gray-200 border-4 h-fit overflow-x-auto",children:n})})}async function v(c,t){const n=await x.informational_grades.get([c,t]);return n||{student_id:t,session_id:c,ar:!1,e:!1,tf:!1,i:!1,kd:!1,l:!1,mi:!1,v:!1}}async function E(c,t){const n=await x.fictional_grades.get([c,t]);return n||{student_id:t,session_id:c,ca:!1,e:!1,go:!1,i:!1,kd:!1,l:!1,mi:!1,v:!1}}function I({isOpen:c,exit:t,student:n}){const g=b(),{session:u}=f.useContext(k),[a,l]=f.useState(),[d,h]=f.useState(),o=a&&+a.ar+ +a.e+ +a.i+ +a.kd+ +a.l+ +a.mi+ +a.tf+ +a.v||0,i=d&&+d.ca+ +d.e+ +d.i+ +d.kd+ +d.l+ +d.mi+ +d.go+ +d.v||0;return f.useEffect(()=>{if(!c)return;const s=u??NaN;if((n==null?void 0:n.id)==null||isNaN(s))return g("/");v(s,n.id).then(r=>{l(r)}),E(s,n.id).then(r=>{h(r)})},[c]),e.jsxs(C,{exit:t,isOpen:c,children:[e.jsxs("h1",{className:"text-xl font-extrabold dark:text-white",children:[n==null?void 0:n.first_name," ",n==null?void 0:n.last_name,e.jsx("small",{className:"ms-2 font-semibold text-gray-500 dark:text-gray-400",children:"Enter student scores here"})]}),e.jsxs("table",{className:"text-center w-full text-sm rtl:text-right text-gray-500 dark:text-gray-400 table-auto",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-3"}),e.jsx("th",{className:"px-2 py-3",children:"V"}),e.jsx("th",{className:"px-2 py-3",children:"KD"}),e.jsx("th",{className:"px-2 py-3",children:"AR"}),e.jsx("th",{className:"px-2 py-3",children:"I"}),e.jsx("th",{className:"px-2 py-3",children:"E"}),e.jsx("th",{className:"px-2 py-3",children:"L"}),e.jsx("th",{className:"px-2 py-3",children:"TF"}),e.jsx("th",{className:"px-2 py-3",children:"MI"}),e.jsx("th",{className:"px-2 py-3",children:"Total"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("th",{className:"px-2 py-3",children:"Informational"}),e.jsx("td",{children:e.jsx("input",{checked:(a==null?void 0:a.v)??!1,onChange:({target:s})=>l(r=>r&&{...r,v:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(a==null?void 0:a.kd)??!1,onChange:({target:s})=>l(r=>r&&{...r,kd:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(a==null?void 0:a.ar)??!1,onChange:({target:s})=>l(r=>r&&{...r,ar:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(a==null?void 0:a.i)??!1,onChange:({target:s})=>l(r=>r&&{...r,i:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(a==null?void 0:a.e)??!1,onChange:({target:s})=>l(r=>r&&{...r,e:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(a==null?void 0:a.l)??!1,onChange:({target:s})=>l(r=>r&&{...r,l:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(a==null?void 0:a.tf)??!1,onChange:({target:s})=>l(r=>r&&{...r,tf:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(a==null?void 0:a.mi)??!1,onChange:({target:s})=>l(r=>r&&{...r,mi:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:o})]})}),e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-3"}),e.jsx("th",{className:"px-2 py-3",children:"V"}),e.jsx("th",{className:"px-2 py-3",children:"KD"}),e.jsx("th",{className:"px-2 py-3",children:"CA"}),e.jsx("th",{className:"px-2 py-3",children:"I"}),e.jsx("th",{className:"px-2 py-3",children:"E"}),e.jsx("th",{className:"px-2 py-3",children:"L"}),e.jsx("th",{className:"px-2 py-3",children:"GO"}),e.jsx("th",{className:"px-2 py-3",children:"MI"}),e.jsx("th",{className:"px-2 py-3"})]})}),e.jsx("tbody",{children:e.jsxs("tr",{className:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800  dark:border-gray-700",children:[e.jsx("th",{className:"px-2 py-3",children:"Fictional"}),e.jsx("td",{children:e.jsx("input",{checked:(d==null?void 0:d.v)??!1,onChange:({target:s})=>h(r=>r&&{...r,v:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(d==null?void 0:d.kd)??!1,onChange:({target:s})=>h(r=>r&&{...r,kd:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(d==null?void 0:d.ca)??!1,onChange:({target:s})=>h(r=>r&&{...r,ca:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(d==null?void 0:d.i)??!1,onChange:({target:s})=>h(r=>r&&{...r,i:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(d==null?void 0:d.e)??!1,onChange:({target:s})=>h(r=>r&&{...r,e:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(d==null?void 0:d.l)??!1,onChange:({target:s})=>h(r=>r&&{...r,l:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(d==null?void 0:d.go)??!1,onChange:({target:s})=>h(r=>r&&{...r,go:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:e.jsx("input",{checked:(d==null?void 0:d.mi)??!1,onChange:({target:s})=>h(r=>r&&{...r,mi:s.checked}),type:"checkbox",className:"w-6 h-6 m-2 rounded-md text-emerald-600 bg-gray-100 border-gray-300 focus:ring-emerald-500 dark:focus:emerald-red-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"})}),e.jsx("td",{children:i})]})})]}),e.jsx("button",{className:"border-2 rounded p-2 hover:bg-gray-100 transition-colors text-xs text-gray-700 uppercase font-bold m-2",onClick:async()=>{a&&x.informational_grades.put(a),d&&x.fictional_grades.put(d),t()},children:"Submit"}),e.jsx("button",{className:"border-2 rounded p-2 hover:bg-gray-100 transition-colors text-xs text-gray-700 uppercase font-bold",onClick:t,children:"Exit"})]})}function R(c,t,n){var g,u;typeof c=="function"?(g=t||[],u=n):(g=[],u=t);var a=y.useRef({hasResult:!1,result:u,error:null}),l=y.useReducer(function(o){return o+1},0);l[0];var d=l[1],h=y.useMemo(function(){var o=typeof c=="function"?c():c;if(!o||typeof o.subscribe!="function")throw c===o?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!a.current.hasResult&&typeof window<"u"&&(typeof o.hasValue!="function"||o.hasValue()))if(typeof o.getValue=="function")a.current.result=o.getValue(),a.current.hasResult=!0;else{var i=o.subscribe(function(s){a.current.result=s,a.current.hasResult=!0});typeof i=="function"?i():i.unsubscribe()}return o},g);if(y.useDebugValue(a.current.result),y.useEffect(function(){var o=h.subscribe(function(i){var s=a.current;(s.error!==null||s.result!==i)&&(s.error=null,s.result=i,s.hasResult=!0,d())},function(i){var s=a.current;s.error!==i&&(s.error=i,d())});return typeof o=="function"?o:o.unsubscribe.bind(o)},g),a.current.error)throw a.current.error;return a.current.result}function S(c,t,n){return R(function(){return p(c)},t||[],n)}function D(c){f.useEffect(()=>{const t=document.title;return document.title=c,()=>{document.title=t}},[c])}export{I as G,D as a,S as u};
