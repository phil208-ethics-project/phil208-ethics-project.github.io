import{R as s,t as v}from"./index-4eaa96f6.js";function p(n,o,i){var f,a;typeof n=="function"?(f=o||[],a=i):(f=[],a=o);var r=s.useRef({hasResult:!1,result:a,error:null}),l=s.useReducer(function(e){return e+1},0);l[0];var c=l[1],b=s.useMemo(function(){var e=typeof n=="function"?n():n;if(!e||typeof e.subscribe!="function")throw n===e?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!r.current.hasResult&&typeof window<"u"&&(typeof e.hasValue!="function"||e.hasValue()))if(typeof e.getValue=="function")r.current.result=e.getValue(),r.current.hasResult=!0;else{var t=e.subscribe(function(u){r.current.result=u,r.current.hasResult=!0});typeof t=="function"?t():t.unsubscribe()}return e},f);if(s.useDebugValue(r.current.result),s.useEffect(function(){var e=b.subscribe(function(t){var u=r.current;(u.error!==null||u.result!==t)&&(u.error=null,u.result=t,u.hasResult=!0,c())},function(t){var u=r.current;u.error!==t&&(u.error=t,c())});return typeof e=="function"?e:e.unsubscribe.bind(e)},f),r.current.error)throw r.current.error;return r.current.result}function h(n,o,i){return p(function(){return v(n)},o||[],i)}export{h as u};
